<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <title>Demo</title>
    <script>
      
      $(document).ready( function() {
        $("#addLogo").click( function(event) {
          event.preventDefault();
          var newComplete = $(".complete:first").clone();
	  newComplete.insertAfter(".complete:last");
          newComplete.find("img").attr("style", "");
          $(newComplete).css("position","absolute");
          var inner = getInnerWidthHeight();
          var top = Math.floor(Math.random()*(inner.height - 100));
          var left = Math.floor(Math.random()*(inner.width - 100));
          newComplete.find(".position").html(top + ", " + left);
          newComplete.offset({top: top, left: left});
          makeDraggable(newComplete);
          makeResizable(newComplete.find("img"));
        });
      });
      
      function makeDraggable(complete){
        complete.draggable( {
          drag: function(event, ui) {
            complete.find(".position").html((ui.offset.top + 60) + ", " + (ui.offset.left + 50));
          }
        });
      }
      
      function makeResizable(img){
        img.resizable( {
          resize: function(event, ui) {
            img.attr("width", ui.size.width);
            img.attr("height", ui.size.height);
          }
        });
      }
      
      function getInnerWidthHeight() {
        var winW = 630, winH = 460;
        if (document.body && document.body.offsetWidth) {
          winW = document.body.offsetWidth;
          winH = document.body.offsetHeight;
        }
        if (document.compatMode=='CSS1Compat' &&
          document.documentElement &&
          document.documentElement.offsetWidth ) {
          winW = document.documentElement.offsetWidth;
          winH = document.documentElement.offsetHeight;
        }
        if (window.innerWidth && window.innerHeight) {
          winW = window.innerWidth;
          winH = window.innerHeight;
        }
        return {width: winW, height: winH};
      }
      
    </script>
  </head>
  <body>
    <form id="addLogo">
    <input type="submit" value="Add Logo!"/>
    </form>
    <div class="complete">
      <div class="position" style=""></div>
      <img src="test.png" style="display:none" width="100" height="100" alt="Return to the Source logo"/>
    </div>
  </body>
</html>
